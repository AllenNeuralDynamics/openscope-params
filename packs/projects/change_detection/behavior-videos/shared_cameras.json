{
  "$schema": "https://raw.githubusercontent.com/AllenNeuralDynamics/openscope-params/main/tooling/model_launcher.schema.json",
  "launcher_version": ">=0.2.7",
  "launcher": "bonsai",
  "protocol_id": 2415,
  "repository_url": "https://github.com/AllenNeuralDynamics/ophys-passive-visual-stim.git",
  "repository_commit_hash": "6bf3318e7ad352485a905a9ffea5cfaea3806885",
  "local_repository_path": "C:/BonsaiDataDoC/Code",
  "script_path": "src/SpinnakerTriggeredCapture.bonsai",
  "bonsai_exe_path": "bonsai/Bonsai.exe",
  "bonsai_setup_script": "bonsai/setup.cmd",
  "output_root_folder": "C:/BonsaiDataDoC/Data/video_data",
  "session_sync_role": "slave",
  "session_sync_port": 50001,
  "session_sync_master_host": "10.128.53.175",
  "script_parameters": {
    "ExposureTimeBody": 10000,
    "ExposureTimeFace": 20000,
    "ExposureTimeEye": 20000,
    "FrameRateBody": 30,
    "FrameRateFace": 30,
    "FrameRateEye": 30
  },
  "pre_acquisition_pipeline": [
    {
      "module_type": "launcher_module",
      "module_path": "metadata_subject_fetch",
      "module_parameters": {
        "metadata_subject_id": "{subject_id}",
        "metadata_subject_path": "{output_session_folder}\\subject.json"
      }
    },
    {
      "module_type": "launcher_module",
      "module_path": "disk_space_check",
      "on_failure": "abort",
      "module_parameters": {
        "required_free_gb": 10
      }
    },
    {
      "module_type": "launcher_module",
      "module_path": "wait_for_user_input",
      "module_parameters": {
        "prompt": "Pause before launching Bonsai. Verify rig is ready, then press Enter."
      }
    }
  ],
  "post_acquisition_pipeline": [
    {
      "module_type": "launcher_module",
      "module_path": "behavior_videos_flatten",
      "module_parameters": {
        "output_session_folder": "{output_session_folder}",
        "behavior_videos_root": "behavior-videos",
        "behavior_videos_prune_empty": true,
        "behavior_videos_copy_only": false
      }
    },
    {
      "module_type": "launcher_module",
      "module_path": "session_archiver",
      "module_parameters": {
        "session_dir": "{output_session_folder}",
        "network_dir": "\\\\allen\\aind\\scratch\\ophys\\Andrew\\VIP_synaptic_dynamics\\{subject_id}\\{session_uuid}\\behavior-videos",
        "backup_dir": "C:\\BonsaiDataDoC\\Archive\\{subject_id}\\{session_uuid}\\behavior-videos",
        "routing_manifest": "{output_session_folder}\\launcher_metadata\\routing_manifest.json"
      }
    }
  ]
}
